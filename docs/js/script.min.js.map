{"version":3,"file":"script.min.js","sources":["script.js"],"sourcesContent":["$('document').ready(function () {\r\n  const $leaders_list = $('#leaders_list'),\r\n    $participants_list = $('#participants_list');\r\n\r\n  const $leaders_item = $(\r\n    '<li class=\"leaders__item d-flex\">' +\r\n      '<p class=\"leaders__name\">' +\r\n      '<span class=\"leaders__lname\"></span>' +\r\n      '<span class=\"leaders__fname\"></span>' +\r\n      '</p>' +\r\n      '<p class=\"leaders__scores\"></p>' +\r\n      '</li>'\r\n  );\r\n\r\n  const $participants_item = $(\r\n    '<div class=\"participants__item d-flex\">' +\r\n      '<p class=\"participants__name\"></p>' +\r\n      '<p class=\"participants__scores\"></p>' +\r\n      '</div>'\r\n  );\r\n\r\n  $.ajax({\r\n    url: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTxwoRqY6UYD1L1ak4F13ipi3vD20Nhn6FwJX5wXgfNgTPb5f356Fu1Nm_fb38CuZEBm6xVlUNFn02K/pub?gid=0&single=true&output=csv',\r\n    dataType: 'text',\r\n    cache: false,\r\n    success: function (data) {\r\n      var items = $.csv.toObjects(data);\r\n\r\n      items.sort(function (x, y) {\r\n        return y['Итог'] - x['Итог'];\r\n      });\r\n\r\n      $.each(items, function (i, val) {\r\n        if (i < 5) {\r\n          add_leaders_item(val);\r\n        } else {\r\n          add_participants_item(val);\r\n        }\r\n      });\r\n\r\n      /* $participants_list.slick({\r\n        vertical: true,\r\n        verticalSwiping: false,\r\n        slidesToShow: 9,\r\n        autoplay: true,\r\n        accessibility: false,\r\n        arrows: false,\r\n        autoplaySpeed: 1500,\r\n        speed: 500,\r\n        waitForAnimate: false,\r\n        infinite: true,\r\n        pauseOnFocus: false,\r\n      }); */\r\n\r\n      let $wrapper = $participants_list,\r\n        $marquees = $wrapper.find('.participants__item'),\r\n        wrapperOffset = $wrapper.offset().top;\r\n\r\n      clearInterval(interval);\r\n\r\n      function move() {\r\n        $.each($marquees, function (i) {\r\n          let $marquee = $(this),\r\n            currentTY = $marquee.css('transform').split(','),\r\n            marqueeHeight = $marquee.outerHeight(true),\r\n            offset = $marquee.offset().top + marqueeHeight;\r\n\r\n          if (currentTY[5] === undefined) {\r\n            currentTY = -1;\r\n          } else {\r\n            currentTY = parseFloat(currentTY[5]) - 1;\r\n          }\r\n\r\n          $marquee.css('transform', 'translateY(' + currentTY + 'px)');\r\n          /*   if (i == 0) {\r\n            console.log(i + ': ' + wrapperOffset);\r\n            console.log(i + ': ' + offset);\r\n            console.log(offset <= wrapperOffset);\r\n          }\r\n */\r\n          if (offset <= wrapperOffset) {\r\n            $wrapper.append($marquee);\r\n            update();\r\n          }\r\n        });\r\n\r\n        function update() {\r\n          $.each($marquees, function () {\r\n            let $marquee = $(this),\r\n              currentTY = $marquee.css('transform').split(','),\r\n              marqueeHeight = $marquee.outerHeight(true);\r\n\r\n            if (currentTY[5] === undefined) {\r\n              currentTY = 0;\r\n            } else {\r\n              currentTY = parseFloat(currentTY[5]);\r\n            }\r\n\r\n            console.log(marqueeHeight);\r\n\r\n            $marquee.css(\r\n              'transform',\r\n              'translateY(' + (currentTY + marqueeHeight) + 'px)'\r\n            );\r\n          });\r\n        }\r\n      }\r\n\r\n      var interval = setInterval(move, 20);\r\n    },\r\n  });\r\n\r\n  function add_leaders_item(data) {\r\n    let $new_item = $leaders_item.clone();\r\n\r\n    $new_item.find('.leaders__lname').text(data['Фамилия']);\r\n    $new_item.find('.leaders__fname').text(data['Имя']);\r\n    $new_item.find('.leaders__scores').text(data['Итог']);\r\n\r\n    $leaders_list.append($new_item);\r\n  }\r\n\r\n  function add_participants_item(data) {\r\n    let $new_item = $participants_item.clone();\r\n\r\n    $new_item\r\n      .find('.participants__name')\r\n      .text(data['Фамилия'] + ' ' + data['Имя']);\r\n    $new_item.find('.participants__scores').text(data['Итог']);\r\n\r\n    $participants_list.append($new_item);\r\n  }\r\n});\r\n"],"names":["$","ready","$leaders_list","$participants_list","$leaders_item","$participants_item","ajax","url","dataType","cache","success","data","items","csv","toObjects","sort","x","y","each","i","val","let","$new_item","clone","find","text","append","$wrapper","$marquees","wrapperOffset","offset","top","clearInterval","interval","setInterval","$marquee","this","currentTY","css","split","marqueeHeight","outerHeight","undefined","parseFloat","console","log"],"mappings":"AAAAA,EAAE,YAAYC,MAAM,WAClB,MAAMC,EAAgBF,EAAE,iBACtBG,EAAqBH,EAAE,sBAEnBI,EAAgBJ,EACpB,8KASIK,EAAqBL,EACzB,uHAMFA,EAAEM,KAAK,CACLC,IAAK,mKACLC,SAAU,OACVC,OAAO,EACPC,QAAS,SAAUC,GACbC,EAAQZ,EAAEa,IAAIC,UAAUH,GAE5BC,EAAMG,KAAK,SAAUC,EAAGC,GACtB,OAAOA,EAAE,QAAUD,EAAE,UAGvBhB,EAAEkB,KAAKN,EAAO,SAAUO,EAAGC,IACrBD,EAAI,EA+Ed,SAA0BR,GACxBU,IAAIC,EAAYlB,EAAcmB,QAE9BD,EAAUE,KAAK,mBAAmBC,KAAKd,EAAK,YAC5CW,EAAUE,KAAK,mBAAmBC,KAAKd,EAAK,QAC5CW,EAAUE,KAAK,oBAAoBC,KAAKd,EAAK,SAE7CT,EAAcwB,OAAOJ,IAGvB,SAA+BX,GAC7BU,IAAIC,EAAYjB,EAAmBkB,QAEnCD,EACGE,KAAK,uBACLC,KAAKd,EAAK,WAAa,IAAMA,EAAK,QACrCW,EAAUE,KAAK,yBAAyBC,KAAKd,EAAK,SAElDR,EAAmBuB,OAAOJ,KAhGHF,KAoBrBC,IAAIM,EAAWxB,EACbyB,EAAYD,EAASH,KAAK,uBAC1BK,EAAgBF,EAASG,SAASC,IAEpCC,mBAkDIC,GAAWC,YAhDf,WACElC,EAAEkB,KAAKU,EAAW,SAAUT,GAC1BE,IAAIc,EAAWnC,EAAEoC,MACfC,EAAYF,EAASG,IAAI,aAAaC,MAAM,KAC5CC,EAAgBL,EAASM,aAAY,GACrCX,EAASK,EAASL,SAASC,IAAMS,EAGjCH,OADmBK,IAAjBL,EAAU,IACC,EAEDM,WAAWN,EAAU,IAAM,EAGzCF,EAASG,IAAI,YAAa,cAAgBD,EAAY,OAOlDP,GAAUD,IACZF,EAASD,OAAOS,GAMlBnC,EAAEkB,KAAKU,EAAW,WAChBP,IAAIc,EAAWnC,EAAEoC,MACfC,EAAYF,EAASG,IAAI,aAAaC,MAAM,KAC5CC,EAAgBL,EAASM,aAAY,GAGrCJ,OADmBK,IAAjBL,EAAU,GACA,EAEAM,WAAWN,EAAU,IAGnCO,QAAQC,IAAIL,GAEZL,EAASG,IACP,YACA,eAAiBD,EAAYG,GAAiB,aAMrB"}